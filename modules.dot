
digraph "Module dependencies" {
	ellesmere [ rank=source ]
	array      -> memory
	bitvector  -> memory
	grammar    -> memory
	symbols    -> memory
	tokens     -> memory
	records    -> symbols
	records    -> bitvector
	objects    -> records
	objects    -> stack
	objects    -> memory
	stack      -> memory
	parser     -> bitvector
	parser     -> objects
	parser     -> stack
	parser     -> records
	ellesmere  -> parser
	ellesmere  -> tokens
	ellesmere  -> bitvector
	stack      -> array
	symbols    -> array
	tokens     -> array
	grammar    -> symbols
	parser     -> grammar
	parser     -> ir
	tokens     -> lex
	symbols    -> ir  // Is this one ok?

	// Back-edges to eliminate
	symbols    -> objects [ color=blue weight=0 ]  // objects.c should manage the tokens, not symbols.c

	// Bad dependencies
	ir         -> parser  [ color=red  weight=0 ]  // This should be in its own file

	// Everything seems to depend on file
	bitvector  -> file    [ color=grey weight=0 ]
	objects    -> file    [ color=grey weight=0 ]
	records    -> file    [ color=grey weight=0 ]
	stack      -> file    [ color=grey weight=0 ]
	symbols    -> file    [ color=grey weight=0 ]
}

